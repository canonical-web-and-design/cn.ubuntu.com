{% extends "base_index.html" %}

{% block page_content %}

<!-- Default Takeover: Download the latest Ubuntu -->
<section data-lang="all" id="takeover" class="p-takeover--grad is-dark is-deep">
  <div class="row p-takeover-animation" id="takeover-animation">
    <div class="col-7 u-vertically-center">
      <h1 id="takeover-title">Ubuntu {{ releases.latest.short_version }}有什么新功能 ? </h1>
      <h4 id="takeover-subtitle">Raspberry Pi的Ubuntu桌面，最新的桌面功能和微云。</h4>
      <div id="takeover-ctas">
        <p><a id="takeover-primary-url" href="/download" class="p-button--positive">下载Ubuntu{{ releases.latest.short_version }}</a></p>
      </div>
    </div>
    <div class="col-5 u-vertically-center u-align--center u-align--left-medium u-hide--small">
      <img id="takeover-image" src="" width="200" alt="" />
    </div>
  </div>
</section>


<!-- Section 1: Hero -->
<template class="u-hide">
  {% include "takeovers/_iot-webinar_session_5.html" %}
  {% include "takeovers/_redhat-openstack.html" %}
</template>

<section class="p-strip is-deep is-bordered">
  {% include "shared/_latest-news.html" %}
</section>

<div class="p-strip is-deep is-bordered">
  <div class="row">
    <div class="col-12">
      <h2>研讨会及案例分享</h2>
    </div>
  </div>
  <div class="row p-divider">
    <div class="col-4 p-divider__block" id="ubuntu-com_iot-digital-signage_left">
      <!-- rtp section start -->
      <div class="p-heading-icon">
        <div class="p-heading-icon__header">
          <img class="p-heading-icon__img p-heading-icon__img--small" src="https://assets.ubuntu.com/v1/f6d6f78b-Case+study.svg" alt="case study" />
          <h4 class="p-heading-icon__title p-muted-heading">案例分享</h4>
        </div>
      </div>
      <h3 class="p-heading--four">
        <a href="/engage/xdf-maas-ebook.html">新东方使用Canonical MAAS使得数据中心裸机部署高自动化且更迅速</a>
      </h3>
      <!-- rtp section end -->
    </div>

    <div class="col-4 p-divider__block" id="ubuntu-com_iot-digital-signage_center">
      <!-- rtp section start -->
      <div class="p-heading-icon">
        <div class="p-heading-icon__header">
          <img class="p-heading-icon__img p-heading-icon__img--small" src="https://assets.ubuntu.com/v1/75902002-news-feed-strip-stock_ebook.svg" alt="whitepaper" />
          <h4 class="p-heading-icon__title p-muted-heading">白皮书</h4>
        </div>
      </div>

      <h3 class="p-heading--four"><a href="/engage/vmware-to-openstack.html">从VMware迁移到Charmed OpenStack，降低成本和减少运营支出</a></h3>
      <!-- rtp section end -->
    </div>

    <div class="col-4 p-divider__block" id="ubuntu-com_iot-digital-signage_right">
      <!-- rtp section start -->
      <div class="p-heading-icon">
        <div class="p-heading-icon__header">
          <img class="p-heading-icon__img p-heading-icon__img--small" src="https://assets.ubuntu.com/v1/75902002-news-feed-strip-stock_ebook.svg" alt="whitepaper" />
          <h4 class="p-heading-icon__title p-muted-heading">白皮书</h4>
        </div>
      </div>
      <h3 class="p-heading--four"><a href="/engage/developer-desktop.html">开发者选择Ubuntu桌面的六大理由</a></h3>
      <!-- rtp section end -->
    </div>
  </div>
</div>

<section class="p-strip--light">
  <div class="row">
    <div class="col-6">
      <h2><a href="/webinars">研讨会及发布活动视频&nbsp;›</a></h2>
      <p class="">
        官方出品的视频直播栏目，涵盖软件开发、产品介绍及支持服务等内容。
      </p>
      <p>
        Ubuntu Tech Live是全新一档由Ubuntu / Canonical官方开设，并专为开发者和企业所设计的栏目。活动以视频直播的方式向大家介绍Ubuntu最新的技术和产品。 设置有问答环节，Canonical专家现场为您解答相关问题。
      </p>
      <p><a href="/webinars">了解更多&nbsp;›</a></p>
    </div>
    <div class="col-6 u-hide--small u-align--center">    
      <img src="https://assets.ubuntu.com/v1/9d42b2ab-3B-embedded-linux_AW.svg" alt="HackerEarth logo" width="420" height="">  
    </div>
  </div>
</section>

<!-- Cloud -->
<section class="p-strip is-bordered">
  <div class="row">
    <div class="col-6">
      <h2><a href="/cloud">构建云服务最好的选择&nbsp;›</a></h2>
      <p>无论您是构建私有云还是公共云，Ubuntu都会提供所有必要的基础架构软件，工具和服务。</p>
      <ul class="p-list--divided">
        <li class="p-list__item is-ticked">完成构建OpenStack云所需的一切</li>
        <li class="p-list__item is-ticked">在领先的公共云中使用已认证的Ubuntu镜像服务器</li>
        <li class="p-list__item is-ticked">一整套配置，构建，管理且支持大型云的工具</li>
        <li class="p-list__item is-ticked">支持付费工具、服务和持续Ubuntu Advantage订阅</li>
      </ul>
      <a href="/contact" onclick="dataLayer.push({'event' : 'GAEvent', 'eventCategory' : 'Internal Link', 'eventAction' : 'Contact Us', 'eventLabel' : 'cn.ubuntu.com - cloud', 'eventValue' : undefined });">联系我们告知您的需求&nbsp;›</a>
    </div>
    <div class="col-6 u-hide--small u-align--center">
      <img src="/static/img/homepage/cloud.png" alt="cloud" />
    </div>
  </div>
</section>


<!-- Desktop -->
<section class="p-strip--light is-deep is-bordered">
  <div class="row">
    <div class="col-6">
      <h2><a href="/desktop">Ubuntu 桌面系统&nbsp;›</a></h2>
      <p>Ubuntu提供了学校，组织，家庭或企业所需的一切。 所有基本应用程序，如办公套件，浏览器，电子邮件和多媒体应用程序。Ubuntu软件中心还提供了数千个游戏和应用程序。</p>
      <a href="/desktop">了解更多&nbsp;›</a>
    </div>
    <div class="col-6 u-align--center">
      <img src="https://assets.ubuntu.com/v1/3e3f7d1f-hero-laptop.png" style="width: 460px;" alt="xps13" />
    </div>
  </div>
</section>

<!-- IoT -->
<section class="p-strip is-bordered">
  <div class="row">
    <div class="col-6">
      <h2><a href="/internet-of-things">用于智能物联网的操作系统&nbsp;›</a></h2>
      <p>从智能家居设备到无人机，机器人和工业系统，Ubuntu Core拥有超高的安全性，应用程序商店和可靠的事务性更新。 Ubuntu使开发变得简单，并且snap安装包使得Ubuntu Core对于分布广泛的设备来说既安全又可靠。</p>
      <a href="/internet-of-things">了解更多&nbsp;›</a>
    </div>
    <div class="col-6 u-align--center">
      <img class="strip__img" src="/static/img/homepage/Logo-block.svg" alt="" />
    </div>
  </div>
</section>

<script>
  function getPrimaryParentLanguage() {
    /**
    * Get the primary parent language
    *
    * Get the user's default language, and if it's a sub-language,
    * infer the parent language - e.g. for "en-GB", infer "en"
    */
    var language = navigator.language || navigator.userLanguage || navigator.browserLanguage || navigator.systemLanguage;

    if (language.indexOf('-') !== -1 ) {
      language = language.split('-')[0];
    }

    return language
  };

  // get the users language and remove any extra detail suffix (e.g. -gb)
  var primaryParentLanguage = getPrimaryParentLanguage();

  // get notices matching the user language
  var notices = document.querySelectorAll(".notice[lang=" + primaryParentLanguage + "]");

  // display only one matching notice
  if (notices.length > 0) {
    notices[0].classList.remove("u-hide")
  }

  var baseTakeover = document.getElementById('takeover');
  var takeoverAnimation = document.getElementById("takeover-animation");

  if (window.localStorage && baseTakeover) {
    /**
    * Choose a takeover
    * ===
    *
    * From the list of provided takeovers from /.takeovers.json,
    * choose one (that matches the client's language), and replace the
    * base template with it.
    */

    var xhr = new XMLHttpRequest();
    if (window.ActiveXObject) {
      xhr = new ActiveXObject('Microsoft.XMLHTTP');
    }

    xhr.onreadystatechange = function() {
      if (xhr.readyState === XMLHttpRequest.DONE) {
        if (xhr.status === 200) {
          var selectedTakeovers= JSON.parse(xhr.responseText);

          if (selectedTakeovers && selectedTakeovers.length > 0) {
            var selectedIndex = null;

            if (window.localStorage.getItem('selected_takeover_index') !== null) {
              // If we previously visited a takeover, increment the number to show the next takeover
              var nextIndex = parseInt(window.localStorage.getItem('selected_takeover_index')) + 1
              selectedIndex = nextIndex < selectedTakeovers.length ? nextIndex : 0;
            } else {
              // Otherwise, randomly choose one of the takeovers and store it for next time
              selectedIndex = Math.floor(Math.random() * selectedTakeovers.length);
            }
            showTakeover(selectedTakeovers, selectedIndex);

            // Store the current takeover index
            localStorage.setItem('selected_takeover_index', selectedIndex)
          }
        } else {
          takeoverAnimation.className = takeoverAnimation.className.replace(" is-loading", "");
          takeoverAnimation.className +=  " is-loaded";
        }
      }
    };

    xhr.open("GET", "/takeovers.json", true);
    xhr.send();
    takeoverAnimation.className +=  " is-loading";
  }

  function showTakeover(takeovers, index) {
    // Default parameter
    index = typeof index !== 'undefined' ? index : 0;

    // Get HTML elements
    var takeover = document.getElementById("takeover");
    var title = document.getElementById("takeover-title");
    var subtitle = document.getElementById("takeover-subtitle");
    var image = document.getElementById("takeover-image");
    var primaryUrl = document.getElementById("takeover-primary-url");
    var secondaryUrl = document.getElementById("takeover-secondary-url");

    // Set values to homepage takeover
    var selectedTakeover = takeovers[index];

    takeover.className = "";
    takeover.removeAttribute("style");

    // Add takeover classes
    var classNameString = "js-takeover p-takeover--" + selectedTakeover.class;
    takeover.className += classNameString;

    // Set takeover content
    title.innerHTML = selectedTakeover.title;
    subtitle.innerHTML = selectedTakeover.subtitle;
    image.src = selectedTakeover.header_image;
    image.onload = function () {
      // Remove animation delay
      if (takeoverAnimation) {
        takeoverAnimation.className = takeoverAnimation.className.replace(" is-loading", "");
        takeoverAnimation.className +=  " is-loaded";
      }
    }

    image.removeAttribute("style");
    image.width = selectedTakeover.image_width;
    image.height = selectedTakeover.image_height;
    primaryUrl.href = selectedTakeover.primary_url;
    primaryUrl.textContent = selectedTakeover.primary_cta;
    if (selectedTakeover.secondary_url && selectedTakeover.secondary_url !== "") {
      secondaryUrl.href = selectedTakeover.secondary_url;
      secondaryUrl.innerHTML = selectedTakeover.secondary_cta + "&nbsp;&rsaquo;";
    }
  }
</script>

{% endblock page_content %}
